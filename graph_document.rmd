---
title: "Graphs"
author: "Xavier Marquez"
date: "2023-02-08"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      message = FALSE,
                      warning = FALSE)

library(targets)
library(tidyverse)
```

## Combined Graphs


```{r fig-graph_ppmi_single_decade_dfm_nn}
#| fig-cap: ppmi single decade dfm, nouns only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7
graph <- tar_read(graph_ppmi_single_decade_dfm)

graph[[2]]

```

 
```{r fig-graph_ppmi_single_decade_dfm_vb}
#| fig-cap: ppmi single decade dfm, verbs only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[3]]

```

 
```{r fig-graph_ppmi_single_decade_dfm_jj}
#| fig-cap: ppmi single decade dfm, adjectives only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[4]]

```

 
```{r fig-graph_ppmi_single_decade_dfm_ism}
#| fig-cap: ppmi single decade dfm, -ism terms only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[5]]

```


```{r fig-graph_sims_svd_word_vectors_decade_dfm_nn}
#| fig-cap: sims svd word vectors decade dfm, nouns only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7
graph <- tar_read(graph_sims_svd_word_vectors_decade_dfm)

graph[[2]]

```

 
```{r fig-graph_sims_svd_word_vectors_decade_dfm_vb}
#| fig-cap: sims svd word vectors decade dfm, verbs only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[3]]

```

 
```{r fig-graph_sims_svd_word_vectors_decade_dfm_jj}
#| fig-cap: sims svd word vectors decade dfm, adjectives only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[4]]

```

 
```{r fig-graph_sims_svd_word_vectors_decade_dfm_ism}
#| fig-cap: sims svd word vectors decade dfm, -ism terms only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[5]]

```


```{r fig-graph_weights_predictive_classification_xgboost_decade_dfm_nn}
#| fig-cap: weights predictive classification xgboost decade dfm, nouns only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7
graph <- tar_read(graph_weights_predictive_classification_xgboost_decade_dfm)

graph[[2]]

```

 
```{r fig-graph_weights_predictive_classification_xgboost_decade_dfm_vb}
#| fig-cap: weights predictive classification xgboost decade dfm, verbs only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[3]]

```

 
```{r fig-graph_weights_predictive_classification_xgboost_decade_dfm_jj}
#| fig-cap: weights predictive classification xgboost decade dfm, adjectives only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[4]]

```

 
```{r fig-graph_weights_predictive_classification_xgboost_decade_dfm_ism}
#| fig-cap: weights predictive classification xgboost decade dfm, -ism terms only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[5]]

```


```{r fig-graph_weights_predictive_classification_LiblineaR_decade_dfm_nn}
#| fig-cap: weights predictive classification LiblineaR decade dfm, nouns only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7
graph <- tar_read(graph_weights_predictive_classification_LiblineaR_decade_dfm)

graph[[2]]

```

 
```{r fig-graph_weights_predictive_classification_LiblineaR_decade_dfm_vb}
#| fig-cap: weights predictive classification LiblineaR decade dfm, verbs only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[3]]

```

 
```{r fig-graph_weights_predictive_classification_LiblineaR_decade_dfm_jj}
#| fig-cap: weights predictive classification LiblineaR decade dfm, adjectives only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[4]]

```

 
```{r fig-graph_weights_predictive_classification_LiblineaR_decade_dfm_ism}
#| fig-cap: weights predictive classification LiblineaR decade dfm, -ism terms only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[5]]

```


```{r fig-graph_combined_weights_nn}
#| fig-cap: combined weights, nouns only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7
graph <- tar_read(graph_combined_weights)

graph[[2]]

```

 
```{r fig-graph_combined_weights_vb}
#| fig-cap: combined weights, verbs only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[3]]

```

 
```{r fig-graph_combined_weights_jj}
#| fig-cap: combined weights, adjectives only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[4]]

```

 
```{r fig-graph_combined_weights_ism}
#| fig-cap: combined weights, -ism terms only. Terms at the top are more closely associated with 'democracy' in later years. Label indicates the peak density of association.
#| fig-height: 7


graph[[5]]

```

## Model performance graphs

```{r combined_performance_graph_classification, fig.cap="Predictive performance of classification models."}
tar_load(combined_performance)

combined_performance %>% 
  dplyr::filter(.estimator == "binary") %>% 
  # dplyr::mutate(.estimate = case_when(.metric == "roc_auc" ~ 1 - .estimate,
  #                                     TRUE ~ .estimate)) %>%
  ggplot2::ggplot(ggplot2::aes( x= decade, y = .estimate, color = .metric, alpha = forcats::fct_rev(sample))) + 
  ggplot2::geom_point() + 
  ggplot2::geom_line() + 
  ggplot2::facet_wrap(.metric~ stringr::str_extract(source, "(xgboost|LiblineaR)(_sampled)?"),
                      scales = "free_y") +
  ggplot2::theme_bw() +
  ggplot2::labs(alpha = "Sample", color = "Metric")

```

